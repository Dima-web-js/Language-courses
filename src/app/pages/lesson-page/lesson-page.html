@if (loading()) {
  <div class="loading-wrapper">
    <mat-spinner diameter="48"></mat-spinner>
    <p>{{ 'Загрузка урока...' | transloco }}</p>
  </div>
} @else if (lessonContent(); as content) {
  <div class="lesson-container">
    <mat-card>
      <mat-card-header>
        <mat-card-title>{{ content.title }}</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="video-container">
          @if (safeVideoUrl(); as videoSrc) {
            <iframe
              [src]="videoSrc"
              frameborder="0"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
              allowfullscreen
            ></iframe>
          }
        </div>

        <div class="lesson-actions">
          <button mat-raised-button (click)="goBackToCourse()">
            {{ 'Вернуться к курсу' | transloco }}
          </button>
          @if (hasPreviousLesson()) {
            <button mat-raised-button (click)="goToPreviousLesson()">
              ← {{ 'Предыдущий урок' | transloco }}
            </button>
          }
          @if (hasNextLesson()) {
            <button mat-raised-button color="primary" (click)="goToNextLesson()">
              {{ 'Следующий урок' | transloco }} →
            </button>
          }
        </div>
      </mat-card-content>
    </mat-card>
  </div>
} @else {
  <div class="error-container">
    <p>{{ 'Урок не найден' | transloco }}</p>
    <button mat-raised-button (click)="goBackToCourse()">{{ 'Вернуться к курсу' | transloco }}</button>
  </div>
}
